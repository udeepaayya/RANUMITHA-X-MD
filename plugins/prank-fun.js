const config = require('../config');
const { cmd } = require('../command');

cmd({
    pattern: "hack",
    desc: "Displays a dynamic and playful 'Hacking' message for fun.",
    category: "fun",
    filename: __filename
},
async (conn, mek, m, { 
    from, quoted, body, isCmd, command, args, q, isGroup, senderNumber, reply 
}) => {
    try {
        // Get the bot owner's number dynamically from conn.user.id
        const botOwner = conn.user.id.split(":")[0]; // Extract the bot owner's number
        if (senderNumber !== botOwner) {
            return reply("Only the bot owner can use this command.");
        }

        const steps = [
            'ğŸ’» *RANUMITHA HACK STARTING...* ğŸ’»',
            
            '*Initializing hacking tools...* ğŸ› ï¸',
            '*Connecting to remote servers...* ğŸŒ',
            
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 10%``` â³'                                            ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 20%``` â³'                                   ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 30%``` â³'                               ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 40%``` â³'                            ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 50%``` â³'                       ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 60%``` â³'                 ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 70%``` â³'            ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 80%``` â³'        ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 90%``` â³'    ,
            '```[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%``` âœ…',
            
            'ğŸ”’ *System Breach: Successful!* ğŸ”“',
            'ğŸš€ *Command Execution: Complete!* ğŸ¯',
            
            '*ğŸ“¡ Transmitting data...* ğŸ“¤',
            '_ğŸ•µï¸â€â™‚ï¸ Ensuring stealth..._ ğŸ¤«',
            '*ğŸ”§ Finalizing operations...* ğŸ',
            
            'âš ï¸ *Note:* All actions are for demonstration purposes only.',
            'âš ï¸ *Reminder:* Ethical hacking is the only way to ensure security.',
            
            '> *RANUMITHA-X-MD-HACKING-COMPLETE â˜£*'
        ];

        for (const line of steps) {
            await conn.sendMessage(from, { text: line }, { quoted: mek });
            await new Promise(resolve => setTimeout(resolve, 1000)); // Adjust the delay as needed
        }
    } catch (e) {
        console.error(e);
        reply(`âŒ *Error:* ${e.message}`);
    }
});

cmd({
    pattern: "hack2",
    alias: ["mainhack", "fuckyourdevice", "fuckyoudevice"],
    use: '.prankhack',
    desc: "Prank hacking simulation (extended ~28-step messages).",
    category: "fun",
    react: "ğŸ’»",
    filename: __filename
},
async (conn, mek, m, { from, reply }) => {
    try {
        function makeBar(percent) {
            const totalBlocks = 20;
            const filled = Math.floor((percent / 100) * totalBlocks);
            const empty = totalBlocks - filled;
            return `[${'â–ˆ'.repeat(filled)}${'â–‘'.repeat(empty)}] ${percent}% â³`;
        }

        const steps = [
            { p: 1,   msg: "ğŸ‘¨â€ğŸ’» RANUMITHA Hacking started..." },
            { p: 3,   msg: "ğŸ” Initializing attack vectors..." },
            { p: 6,   msg: "ğŸ“¡ Scanning open ports..." },
            { p: 8,   msg: "ğŸ›°ï¸ Mapping target network..." },
            { p: 10,  msg: "ğŸ›¡ï¸ Firewall bypassed..." },
            { p: 12,  msg: "ğŸ”‘ Cracking SSH keys..." },
            { p: 15,  msg: "ğŸŒ Connecting to server..." },
            { p: 18,  msg: "ğŸ“‚ Accessing database..." },
            { p: 20,  msg: "ğŸ’½ Extracting user tables..." },
            { p: 25,  msg: "ğŸ“Š Reading sensitive data..." },
            { p: 30,  msg: "ğŸ’¾ Dumping database..." },
            { p: 35,  msg: "ğŸ“¡ Uploading payload..." },
            { p: 40,  msg: "âš¡ Privilege escalation..." },
            { p: 45,  msg: "ğŸ–¥ï¸ Root access granted..." },
            { p: 50,  msg: "ğŸ“‚ Accessing data center..." },
            { p: 55,  msg: "ğŸ”“ Decrypting secure files..." },
            { p: 60,  msg: "ğŸ”’ Encrypting stolen archive..." },
            { p: 65,  msg: "ğŸ“¦ Packing exfiltrated files..." },
            { p: 70,  msg: "ğŸ“¡ Uploading to remote server..." },
            { p: 75,  msg: "ğŸ“¶ Signal boosted for stealth transfer..." },
            { p: 80,  msg: "ğŸ§¹ Cleaning local traces..." },
            { p: 85,  msg: "ğŸ“€ Formatting system logs..." },
            { p: 88,  msg: "ğŸ”„ Spoofing IP address..." },
            { p: 90,  msg: "ğŸš¨ Finalizing exploit..." },
            { p: 93,  msg: "ğŸ“‚ Seeding fake backups..." },
            { p: 96,  msg: "ğŸ›°ï¸ Bypassing monitoring tools..." },
            { p: 98,  msg: "ğŸ›‘ Disconnecting secure channels..." },
            { p: 100, msg: "âœ… HACKING COMPLETE â€” TARGET COMPROMISED!" }
        ];

        const baseDelay = 1000; // ms

        for (let i = 0; i < steps.length; i++) {
            ((step, delay) => {
                setTimeout(async () => {
                    try {
                        const text = `${step.msg}\n${makeBar(step.p)}`;
                        await conn.sendMessage(from, { text }, { quoted: mek });
                    } catch (err) {
                        console.error("Send error:", err);
                    }
                }, delay);
            })(steps[i], i * baseDelay);
        }

    } catch (e) {
        console.error("Error in prankhack command:", e);
        reply(`Error: ${e.message}`);
    }
});
